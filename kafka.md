文件描述符限制：Kafka会频繁地创建井修改文件系统中的文件，这包括消息的日志文件、索引文件及各种元数据管理文件等。因此如果一个broker上面有很多topic的分区，那么这个broker势必就需要打开很多个文件一一大致数量约等于分区数×（分区总大小／日志段大小〉×3。举一个例子，假设broker上保存了50个分区，每个分区平均尺寸是IOGB，每个日志段大小是IGB，那么这个broker需要维护1500个左右的文件描述符。因此在实际使用场景中最好首先增大进程能够打开的最大文件描述符上限，比如设置一个很大的值，如100000。具体设置方法为ulimit-n100000。•Socket缓冲区大小：这里指的是OS级别的Socket缓冲区大小，而非Kafka自己提供的Socket缓冲区参数。事实上，Kafka自己的参数将其设置为64阻，这对于普通的内网环境而言通常是足够的，因为内网环境下往返时间（round-triptime,RTT）一般都很低，不会产生过多的数据堆积在Socket缓冲区中，但对于那些跨地区的数据传输而言，仅仅增加Kafka参数就不够了，因为前者也受限于OS级别的设置。因此如果是做远距离的数据传输，那么建议将OS级别的Socket缓冲区调大，比如增加到128阻，甚至更大。•最好使用Ext4或×FS文件系统：其实Kafka操作的都是普通文件，并没有依赖于特定的文件系统，但依然推荐使用Ext4或XFS文件系统，特别是XFS通常都有着更好性能。这种性能的提升主要影响的是Kafka的写入性能。根据官网的测试报告，使用XFS的写入时间大约是160毫秒，而使用Ext4大约是250毫秒。因此生产环境中最好使用XFS文件系统。•关闭swap：其实这是很多使用磁盘的应用程序的常规调优手段，具体命令为sysctlvm.swappiness=＜一个较小的数〉，即大幅度降低对swap空间的使用，以免极大地拉低性能。后面的章节中会详细讨论为何不显式设置该值为0。•设置更长的flush时间：我们知道Kafka依赖OS页缓存的“刷盘”功能实现消息真正写入物理磁盘，默认的刷盘问隔是5秒。通常情况下，这个间隔太短了，适当增加该值可以在很大程度上提升OS物理写入操作的性能。Linkedin公司自己就将该值设置为2分钟以增加整体的物理写入吞吐量。